<template>
    <lightning-card title="Demographics" icon-name="utility:identity">
        <div class="slds-p-around_medium">
            <!-- Name Section -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Name & Identification</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Resident's First Name"
                                value={demographics.FirstName}
                                data-field="FirstName"
                                onchange={handleInputChange}
                                disabled={firstNameDisabled}
                                required>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Middle Name"
                                value={demographics.MiddleName}
                                data-field="MiddleName"
                                onchange={handleInputChange}
                                disabled={middleNameDisabled}>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Last Name"
                                value={demographics.LastName}
                                data-field="LastName"
                                onchange={handleInputChange}
                                disabled={lastNameDisabled}
                                required>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Preferred Name"
                                value={demographics.Preferred_Name__c}
                                data-field="Preferred_Name__c"
                                onchange={handleInputChange}
                                disabled={preferredNameDisabled}>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input
                                type="date"
                                label="Date of Birth"
                                value={demographics.PersonBirthdate}
                                data-field="PersonBirthdate"
                                onchange={handleInputChange}
                                disabled={birthdateDisabled}>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input
                                type="number"
                                label="Age"
                                value={demographics.Age__c}
                                data-field="Age__c"
                                disabled>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input
                                label="SSN"
                                value={demographics.SSN__c}
                                data-field="SSN__c"
                                onchange={handleInputChange}
                                disabled={ssnDisabled}
                                pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}"
                                message-when-pattern-mismatch="Enter SSN in format: XXX-XX-XXXX">
                            </lightning-input>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Translation & Referral -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Service Information</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-combobox
                                label="Translation Assistance Needed"
                                value={demographics.Translation_Assistance_Needed__c}
                                options={translationOptions}
                                data-field="Translation_Assistance_Needed__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-combobox
                                label="Referral Source"
                                value={demographics.Referral_Source__c}
                                options={referralSourceOptions}
                                data-field="Referral_Source__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gender Identity & Pronouns -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Gender Identity & Pronouns</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-combobox
                                label="Gender Identity"
                                value={demographics.Gender_Identity__c}
                                options={genderIdentityOptions}
                                data-field="Gender_Identity__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <template if:true={showGenderOther}>
                            <div class="slds-col slds-size_1-of-1">
                                <lightning-input
                                    label="If different identity, please specify"
                                    value={demographics.Gender_Identity_Other__c}
                                    data-field="Gender_Identity_Other__c"
                                    onchange={handleInputChange}
>
                                </lightning-input>
                            </div>
                        </template>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-combobox
                                label="Preferred Pronouns"
                                value={demographics.Preferred_Pronouns__c}
                                options={pronounOptions}
                                data-field="Preferred_Pronouns__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <template if:true={showPronounsOther}>
                            <div class="slds-col slds-size_1-of-1">
                                <lightning-input
                                    label="Other pronouns"
                                    value={demographics.Pronouns_Other__c}
                                    data-field="Pronouns_Other__c"
                                    onchange={handleInputChange}
>
                                </lightning-input>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Race & Ethnicity -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Race & Ethnicity</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-dual-listbox
                                label="Race & Ethnicity (select all that apply)"
                                source-label="Available"
                                selected-label="Selected"
                                value={demographics.Race_Ethnicity__c}
                                options={raceEthnicityOptions}
                                data-field="Race_Ethnicity__c"
                                onchange={handleMultiSelectChange}
>
                            </lightning-dual-listbox>
                        </div>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-input
                                label="Additional Race & Ethnicity Detail"
                                value={demographics.Race_Ethnicity_Detail__c}
                                data-field="Race_Ethnicity_Detail__c"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sexual Orientation -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Sexual Orientation</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-combobox
                                label="Sexual Orientation"
                                value={demographics.Sexual_Orientation__c}
                                options={sexualOrientationOptions}
                                data-field="Sexual_Orientation__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <template if:true={showSexualOrientationOther}>
                            <div class="slds-col slds-size_1-of-1">
                                <lightning-input
                                    label="Other sexual orientation"
                                    value={demographics.Sexual_Orientation_Other__c}
                                    data-field="Sexual_Orientation_Other__c"
                                    onchange={handleInputChange}
>
                                </lightning-input>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Contact Information</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                type="tel"
                                label="Contact Number"
                                value={demographics.PersonMobilePhone}
                                data-field="PersonMobilePhone"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                type="email"
                                label="Email"
                                value={demographics.PersonEmail}
                                data-field="PersonEmail"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Emergency Contact"
                                value={demographics.Emergency_Contact_Name__c}
                                data-field="Emergency_Contact_Name__c"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input
                                label="Relationship to Client"
                                value={demographics.Emergency_Contact_Relationship__c}
                                data-field="Emergency_Contact_Relationship__c"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-input
                                label="Place of Birth (City/County/State/Country)"
                                value={demographics.Place_of_Birth__c}
                                data-field="Place_of_Birth__c"
                                onchange={handleInputChange}
>
                            </lightning-input>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Health Information -->
            <div class="slds-section slds-is-open slds-m-bottom_medium">
                <h3 class="slds-section__title slds-theme_shade">
                    <span class="slds-truncate">Health Information</span>
                </h3>
                <div class="slds-section__content">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-combobox
                                label="Are you a veteran?"
                                value={demographics.Is_Veteran__c}
                                options={yesNoOptions}
                                data-field="Is_Veteran__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-textarea
                                label="Known allergies"
                                value={demographics.Known_Allergies__c}
                                data-field="Known_Allergies__c"
                                onchange={handleInputChange}
>
                            </lightning-textarea>
                        </div>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-textarea
                                label="Known diagnoses"
                                value={demographics.Known_Diagnoses__c}
                                data-field="Known_Diagnoses__c"
                                onchange={handleInputChange}
>
                            </lightning-textarea>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-combobox
                                label="Are you currently taking any medications?"
                                value={demographics.Taking_Medications__c}
                                options={yesNoOptions}
                                data-field="Taking_Medications__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-combobox
                                label="Do you need help refilling those medications?"
                                value={demographics.Needs_Medication_Refill_Help__c}
                                options={yesNoOptions}
                                data-field="Needs_Medication_Refill_Help__c"
                                onchange={handleInputChange}
>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1">
                            <lightning-textarea
                                label="Notes on medications"
                                value={demographics.Medication_Notes__c}
                                data-field="Medication_Notes__c"
                                onchange={handleInputChange}
>
                            </lightning-textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </lightning-card>
</template>
